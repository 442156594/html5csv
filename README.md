html5csv
========

Quickly create apps that generate, accept, analyze, plot, edit and store CSV tabular data all without a server.  Or with a server, too.  Extendable.

License: GPLv3

August 8, 2013. This is the first version of the README file.  

This is a work in progress and there is very limited documentation available
at this time.  

For now, the "docs" are this file, and the unit tests in qtestcsv.js

Example 1:

"Hello World"  

<a href="http://jsfiddle.net/DrPaulBrewer/zHN7g/">JSFiddle for Example 1: Hello World in html5csv</a>

In every introductory language class there is usually a "Hello World" program
that teaches the basics of how to get the language to do something by having
it print "Hello World".

Usually, one stops there.  

Here, we want to work with tabular or matrix data, so we need to go 
a little further.  We will create data with Hello and World as the headings
and various characters and their planets as the data. We'll print out the
data in a table on the web page.  And then, we'll save the data somewhere
on the browser's storage, a feature called "local storage" in HTML 5.

CSV.
  begin([
   ["Hello","World"],
   ["Paul","Earth"],
   ["Marvin","Mars"],
   ["Spock","Vulcan"]
         ]).
  table("output",{header:1,caption:"My First html5csv program"}).
  save("local/helloWorld").
  go();

0. CSV. accesses the CSV object created by html5csv.js  This is the only object
created in window. Every CSV workflow starts with begin, but nothing is called
until we hit go(). Steps may be asynchronous. 
1. begin Loads the data into the CSV engine;
2. table generates a table in the div named "output", or creates such a div;
3. save saves the table HTML 5 browser localStorage, key local/helloWorld, 
using LZString compression if available; 
4. go() starts the chain executing.  Execution of each step is asynchronous
and involves a brief delay in setTimeout before going to the next step.

<hr />

Example 2: Downloading HelloWorld.csv

<a href="http://jsfiddle.net/DrPaulBrewer/dzPZP/">JSFiddle Example 2 Downloading HelloWorld.csv</a>

Please do Example 1 before trying this one, or it won't work.

CSV.begin("local/helloWorld").download("HelloWorld.csv").go();

Here, we access the data created in example 1.  It was stored away in the 
browser, and it will stay there until explicitly deleted.  We are going to
take that data, and generate a CSV file called "HelloWorld.csv" and output
it to the user.  

The user will not have to click on a link, it is pushed at him. This is
an example to show you HTML 5 Data URL Download in action.   You should
bind this code to a link click function in jQuery if you want a less
pushy user experience.

The data downloads directly from the browser.  No server is involved. 

You should be able to send the CSV file to OpenOffice Spreadsheet or Excel
without a problem.

Example #2 may not work on all browsers, but recent Chrome and Firefox seem ok.

Finally, to clear the data from your browser, you will need to do a general 
"delete cookies and other site and plugin data" from chrome's control panel.
I expect IE and Netscape have something similar.  Executing localStorage.clear()
in a console will only clear the local Storage for the current site, and it is
stored by site.

A name like "session/helloWorld" (instead of "local/helloWorld") will delete
data when the session tab or window is closed instead of keeping it potentially
forever... because the data will be stored in HTML 5 session storage instead
of HTML 5 local storage.  

Names with slants that are not local/ or session/ must be mapped by a plugin,
possibly to a server.  No plugins are currently available, but one is under
development and testing.

<hr />

There are a number of other tricks that begin can do, including prompting the
user for an input file (in CSV format), creating special arrays of uniform
or normal random variables, arrays prefilled with zero, a number, or
a diagonal, or generated by a user supplied function.

to get a file of CSV data from the user
  in the HTML, use an input element give it id "choose" and type "file",
  then in the Javascript
     CSV.begin('#choose').....go();

Getting the data out of an existing HTML table works the same way,
but there is no HTML input element.  The name in CSV.begin(name) can be
a valid jQuery selector for a container or containers, and if there are 
table rows as descendents it will gather the data.

Math Matrices

A 5x10 matrix of uniform [0,1] Random Variables
  CSV.begin('%U', {dim: [5,10]}).do-stuff...go();

A 1000x2 matrix of normal(mean=0,var=1) Random Variables
naming the columns E1 and E2 in the first row
  CSV.begin('%N', {dim: [1000,2], header:['E1','E2'}).do-stuff...go();

A 5x5 matrix with 1 along the diagonal
  CSV.begin('%I', {dim: [5,5]}).do-stuff....go();
or
  CSV.begin('%D', {diag: [1,1,1,1,1]}).do-stuff....go();

A 100x100 matrix with values given by a function of row i, column j over [0,l-1]
  CSV.begin('%F', {dim:[100,100], func: function(i,j){ return (1+i)/(1+j); }})......go();

<hr />

Possibly, you want to do something a little more serious now,
like generate or upload numerical data, run a regression, or plot data. 

For more examples, read through the unit tests in qtestcsv.js

You can also run the unit tests at http://www.csvscript.com/dev/qtest.html,
but the best way to see the test source is to look at the qtestcsv.js file

Documentation in some form will be forthcoming as I get time.


